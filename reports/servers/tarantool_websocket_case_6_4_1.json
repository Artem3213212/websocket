{
   "agent": "Tarantool websocket",
   "behavior": "FAILED",
   "behaviorClose": "FAILED",
   "case": 74,
   "closedByMe": true,
   "createStats": true,
   "createWirelog": true,
   "description": "Send invalid UTF-8 text message in 3 fragments (frames).\nFirst frame payload is valid, then wait, then 2nd frame which contains the payload making the sequence invalid, then wait, then 3rd frame with rest.\nNote that PART1 and PART3 are valid UTF-8 in themselves, PART2 is a 0x110000 encoded as in the UTF-8 integer encoding scheme, but the codepoint is invalid (out of range).\n<br><br>MESSAGE PARTS:<br>\nPART1 = cebae1bdb9cf83cebcceb5<br>\nPART2 = f4908080<br>\nPART3 = 656469746564<br>\n",
   "droppedByMe": false,
   "duration": 1003,
   "expectation": "The first frame is accepted, we expect to timeout on the first wait. The 2nd frame should be rejected immediately (fail fast on UTF-8). If we timeout, we expect the connection is failed at least then, since the complete message payload is not valid UTF-8.",
   "expected": {
      "NON-STRICT": [
         [
            "timeout",
            "A"
         ],
         [
            "timeout",
            "B"
         ]
      ],
      "OK": [
         [
            "timeout",
            "A"
         ]
      ]
   },
   "expectedClose": {
      "closeCode": [
         1007
      ],
      "closedByMe": false,
      "closedByWrongEndpointIsFatal": true,
      "requireClean": false
   },
   "failedByMe": true,
   "httpRequest": "GET / HTTP/1.1\r\nUser-Agent: AutobahnTestSuite/0.8.0-0.10.9\r\nHost: 127.0.0.1:8443\r\nUpgrade: WebSocket\r\nConnection: Upgrade\r\nPragma: no-cache\r\nCache-Control: no-cache\r\nSec-WebSocket-Key: Tudkt28NcN7dB1mQi8H2wQ==\r\nSec-WebSocket-Version: 13\r\n\r\n",
   "httpResponse": "HTTP/1.1 101 Switching Protocols\r\nSec-WebSocket-Accept: HI4SHxkqAEDx+mab+A6qQ3nei4I=\r\nUpgrade: websocket\r\nConnection: Upgrade\r\n\r\n",
   "id": "6.4.1",
   "isServer": false,
   "localCloseCode": 1007,
   "localCloseReason": "encountered invalid UTF-8 while processing text message at payload octet index 12",
   "received": [
      [
         "timeout",
         "A"
      ]
   ],
   "remoteCloseCode": 1000,
   "remoteCloseReason": null,
   "reportCompressionRatio": false,
   "reportTime": false,
   "result": "Actual events match at least one expected.",
   "resultClose": "The connection was failed by the wrong endpoint",
   "rxFrameStats": {
      "0": 1,
      "1": 1,
      "8": 1,
      "9": 1
   },
   "rxOctetStats": {
      "2": 1,
      "4": 1,
      "6": 1,
      "13": 1,
      "129": 1
   },
   "started": "2018-08-28T11:51:22.838Z",
   "trafficStats": null,
   "txFrameStats": {
      "0": 1,
      "1": 1,
      "8": 1,
      "10": 1
   },
   "txOctetStats": {
      "6": 1,
      "10": 1,
      "17": 1,
      "89": 1,
      "240": 1
   },
   "wasClean": true,
   "wasCloseHandshakeTimeout": false,
   "wasNotCleanReason": null,
   "wasOpenHandshakeTimeout": false,
   "wasServerConnectionDropTimeout": false,
   "wirelog": [
      [
         "TO",
         [
            240,
            "474554202f20485454502f312e310d0a557365722d4167656e743a204175746f6261686e5465737453756974652f302e382e302d302e31302e390d0a486f7374 ..."
         ],
         false
      ],
      [
         "RO",
         [
            129,
            "485454502f312e312031303120537769746368696e672050726f746f636f6c730d0a5365632d576562536f636b65742d4163636570743a204849345348786b71 ..."
         ]
      ],
      [
         "TF",
         [
            11,
            "\u03ba\u1f79\u03c3\u03bc\u03b5"
         ],
         1,
         false,
         0,
         "67a8749a",
         null,
         null,
         false
      ],
      [
         "TO",
         [
            17,
            "018b67a8749aa9129527de67f754db66c1"
         ],
         false
      ],
      [
         "CT",
         1,
         "A"
      ],
      [
         "RO",
         [
            2,
            "8900"
         ]
      ],
      [
         "RF",
         [
            0,
            ""
         ],
         9,
         true,
         0,
         false,
         null
      ],
      [
         "TF",
         [
            0,
            ""
         ],
         10,
         true,
         0,
         "f72839dc",
         null,
         null,
         false
      ],
      [
         "TO",
         [
            6,
            "8a80f72839dc"
         ],
         false
      ],
      [
         "RO",
         [
            13,
            "010bcebae1bdb9cf83cebcceb5"
         ]
      ],
      [
         "RF",
         [
            11,
            "\u03ba\u1f79\u03c3\u03bc\u03b5"
         ],
         1,
         false,
         0,
         false,
         null
      ],
      [
         "CTE",
         "A"
      ],
      [
         "TF",
         [
            4,
            "0xf4908080"
         ],
         0,
         false,
         0,
         "277beeac",
         null,
         null,
         false
      ],
      [
         "TO",
         [
            10,
            "0084277beeacd3eb6e2c"
         ],
         false
      ],
      [
         "CT",
         1,
         "B"
      ],
      [
         "RO",
         [
            6,
            "0004f4908080"
         ]
      ],
      [
         "TF",
         [
            83,
            "0x03ef656e636f756e746572656420696e76616c6964205554462d38207768696c652070726f63657373696e672074657874206d65737361676520617420706179 ..."
         ],
         8,
         true,
         0,
         "f70acc3f",
         null,
         null,
         false
      ],
      [
         "TO",
         [
            89,
            "88d3f70acc3ff4e5a9519465b951836fbe5a932aa551816ba056932a996bb127f41f8062a553922abc4d9869a94c8463a258d77ea947832aa15a8479ad58922a ..."
         ],
         false
      ],
      [
         "RF",
         [
            0,
            ""
         ],
         0,
         false,
         0,
         false,
         null
      ],
      [
         "RO",
         [
            4,
            "880203e8"
         ]
      ],
      [
         "RF",
         [
            2,
            "0x03e8"
         ],
         8,
         true,
         0,
         false,
         null
      ]
   ]
}